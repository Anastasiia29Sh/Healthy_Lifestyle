import{_ as C,W as U,X as k,x as V,L as A,M as R,c as e,N as o,a2 as c,P as y,U as w,$,a0 as f,Q as g,S as E,Y as P,Z as I,K as T,R as z,a1 as K}from"./index-100b5b1d.js";import{u as L,V as O}from"./actionsFood-b506e3c2.js";import{V as _,a as M}from"./VRow-ac05bfdd.js";import{V as B}from"./VContainer-af97b46b.js";import{V as Q}from"./VDialog-7776bab4.js";const W={__name:"FilterFood",emits:["foodFilter"],setup(m,{emit:F}){const b=U(),{foods:s}=k(b),{getAllFoods:N}=b;N();const n=V(""),d=V(""),u=V(""),v=V("");function a(){if(n.value=isNaN(n.value)||n.value===""?t("calories"):parseFloat(n.value),d.value=isNaN(d.value)||d.value===""?t("proteins"):parseFloat(d.value),u.value=isNaN(u.value)||u.value===""?t("fats"):parseFloat(u.value),v.value=isNaN(v.value)||v.value===""?t("carbs"):parseFloat(v.value),n.value>=0&&d.value>=0&&u.value>=0&&v.value>=0){let x=s.value.filter(l=>l.calories<=n.value&&l.proteins<=d.value&&l.fats<=u.value&&l.carbs<=v.value);F("foodFilter",x)}}function t(x){return s.value.map(l=>l[x]).reduce((l,r)=>l>r?l:r)}return(x,l)=>(A(),R("div",null,[e(M,null,{default:o(()=>[e(_,{cols:"6"},{default:o(()=>[e(c,{label:"Max кол-во калорий",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=r=>n.value=r),type:"number",suffix:"Ккал",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(_,{cols:"6"},{default:o(()=>[e(c,{type:"number",label:"Max кол-во белков",modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=r=>d.value=r),suffix:"г",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(_,{cols:"6"},{default:o(()=>[e(c,{label:"Max кол-во жиров",modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]=r=>u.value=r),suffix:"г",type:"number",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(_,{cols:"6"},{default:o(()=>[e(c,{label:"Max кол-во углеводов",modelValue:v.value,"onUpdate:modelValue":l[3]||(l[3]=r=>v.value=r),suffix:"г",type:"number",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(w,{variant:"tonal",onClick:l[4]||(l[4]=r=>a()),class:"btn-ok"},{default:o(()=>[y("ОК")]),_:1})]))}},X=C(W,[["__scopeId","data-v-db6fc6bc"]]);const Y=m=>(P("data-v-9959c8f2"),m=m(),I(),m),Z=Y(()=>g("span",null,"Добавление нового продукта",-1)),j={class:"actions"},q={class:"mess mt-2"},G={__name:"AddNewFoodPanel",emits:["openPalenAdd","rewriteListFood"],setup(m,{emit:F}){const b=L(),{infaAddedNewFood:s}=k(b),{addNewFood:N}=b;let n=V("");function d(){s.value.name!==""?(N(),s.value={id:0,name:"",calories:0,proteins:0,fats:0,carbs:0},n.value="",F("rewriteListFood"),u()):n.value="Введите все данные"}function u(){F("openPalenAdd",!1)}return(v,a)=>(A(),$(O,null,{default:o(()=>[e(B,null,{default:o(()=>[Z,e(M,{class:"pt-4"},{default:o(()=>[e(_,{cols:"12"},{default:o(()=>[e(c,{label:"Продукт/Блюдо",modelValue:f(s).name,"onUpdate:modelValue":a[0]||(a[0]=t=>f(s).name=t),type:"text",suffix:"Ккал",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(_,{cols:"6"},{default:o(()=>[e(c,{label:"Калории",modelValue:f(s).calories,"onUpdate:modelValue":a[1]||(a[1]=t=>f(s).calories=t),type:"number",suffix:"Ккал",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(_,{cols:"6"},{default:o(()=>[e(c,{label:"Белки",modelValue:f(s).proteins,"onUpdate:modelValue":a[2]||(a[2]=t=>f(s).proteins=t),type:"number",suffix:"г",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(_,{cols:"6"},{default:o(()=>[e(c,{label:"Жиры",modelValue:f(s).fats,"onUpdate:modelValue":a[3]||(a[3]=t=>f(s).fats=t),type:"number",suffix:"г",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(_,{cols:"6"},{default:o(()=>[e(c,{label:"Углеводы",modelValue:f(s).carbs,"onUpdate:modelValue":a[4]||(a[4]=t=>f(s).carbs=t),type:"number",suffix:"г",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),g("div",j,[e(w,{onClick:a[5]||(a[5]=t=>d()),class:"btn-ok"},{default:o(()=>[y(" Ок ")]),_:1}),e(w,{variant:"text",onClick:a[6]||(a[6]=t=>u()),class:"ml-2"},{default:o(()=>[y(" Отмена ")]),_:1})]),g("p",q,E(f(n)),1)]),_:1})]),_:1}))}},H=C(G,[["__scopeId","data-v-9959c8f2"]]);const J=m=>(P("data-v-e50bc1a2"),m=m(),I(),m),h=J(()=>g("h2",{class:"ps-6"},"Справочник",-1)),ee={__name:"FoodDirectory",setup(m){const F=U(),b=L(),{foods:s}=k(F),{getAllFoods:N}=F,n=V(),d=V("");function u(){N(),n.value=s.value}u();let v=[{align:"start",key:"name",sortable:!1,title:"Продукты/Блюда"},{key:"calories",title:"Калории (Ккал)"},{key:"proteins",title:"Белки (г)"},{key:"fats",title:"Жиры (г)"},{key:"carbs",title:"Углеводы (г)"}];const a=V(!1),{infaAddedNewFood:t}=k(b);function x(){t.value.id=n.value.length,a.value=!0}const l=V(!1);function r(S){n.value=S,l.value=!1}return(S,i)=>{const D=T("v-data-table");return A(),$(B,{class:"this-page h-screen overflow-y-auto"},{default:o(()=>[h,e(w,{variant:"outlined",onClick:i[0]||(i[0]=p=>x()),class:"mt-2 float-right",color:"#33691E"},{default:o(()=>[y(" Новый продукт ")]),_:1}),e(c,{modelValue:d.value,"onUpdate:modelValue":i[1]||(i[1]=p=>d.value=p),"append-icon":"mdi-magnify",label:"Поиск","single-line":"","hide-details":"",variant:"underlined",class:"mt-14"},null,8,["modelValue"]),e(w,{variant:"text",color:"#1e3e11",onClick:i[2]||(i[2]=p=>l.value=!l.value),class:"mt-4 float-right"},{default:o(()=>[e(z,{color:"#33691E"},{default:o(()=>[y("mdi-filter")]),_:1}),y(" Фильтрация ")]),_:1}),e(X,{onFoodFilter:i[3]||(i[3]=p=>r(p)),class:K(["filter","mt-16",l.value?"block-show":""])},null,8,["class"]),e(D,{headers:f(v),items:n.value,search:d.value,class:"foods-table mt-16"},null,8,["headers","items","search"]),e(Q,{modelValue:a.value,"onUpdate:modelValue":i[6]||(i[6]=p=>a.value=p),"max-width":"500px"},{default:o(()=>[e(H,{onOpenPalenAdd:i[4]||(i[4]=p=>{a.value=p}),onRewriteListFood:i[5]||(i[5]=p=>u())})]),_:1},8,["modelValue"])]),_:1})}}},ne=C(ee,[["__scopeId","data-v-e50bc1a2"]]);export{ne as default};
