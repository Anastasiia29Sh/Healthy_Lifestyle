import{_ as Y,J as Z,W as j,X as h,x as d,y as q,K as y,L as G,$ as M,N as o,c as a,R as ee,P as p,a0 as i,Q as n,S as c,U as f,a1 as P,Y as te,Z as oe}from"./index-b646c7ae.js";import{u as ae,V as A}from"./actionsFood-80d9aeb1.js";import{A as le}from"./AddEditFoodSectionPanel-d2aa1d02.js";import{V as k}from"./VContainer-93faf15e.js";import{V as x}from"./VDialog-57e1799c.js";const E=m=>(te("data-v-cc05b351"),m=m(),oe(),m),se={class:"ps-6"},ne=["onClick"],ie=E(()=>n("span",null,"Вы уверены, что хотите удалить этот продукт?",-1)),de={class:"actions pt-4"},ce=E(()=>n("p",null,"Вы еще не внесли ни одного блюда",-1)),re={__name:"FoodSection",setup(m){const s=Z(),w=j(),g=ae(),{foods:I,listFoodSpecificSectionDate:v}=h(w),{getAllFoods:L,getListFoodSpecificSectionDate:B}=w;L();const{addedFoodSectionDate:N,infaAddedFoodSectionDate:R,idFood:C}=h(g),{deleteFoodSectionDate:U}=g,D=d([]);function F(){D.value=N.value.filter(l=>l.section===s.params.section&&l.date===s.params.date),B(D)}F();const V=d(v.value.length>0);let z=(s.params.section==="breakfast"?"Завтрак":s.params.section==="lunch"?"Обед":s.params.section==="dinner"?"Ужин":"")+", "+s.params.date,T=[{align:"start",key:"name",sortable:!1,title:"Продукты/Блюда"},{key:"weight",title:"Масса (г)"},{key:"calories",title:"Калории (Ккал)"},{key:"actions",title:""}];const _=d(!1),r=d({calories:0,proteins:0,fats:0,carbs:0});function H(l){let e=I.value.filter(b=>b.id===l)[0];r.value={calories:e.calories,proteins:e.proteins,fats:e.fats,carbs:e.carbs},_.value=!_.value}const S=d(!1);let J="edit",K="Редактировать";function O(l){C.value=l.id,R.value={id:l.id,name:l.name,weight:l.weight,section:s.params.section,date:s.params.date},S.value=!0}const u=d(!1);function Q(l){C.value=l.id,u.value=!0}function W(){U(),F(),u.value=!1}return q(v,()=>{V.value=v.value.length>0}),(l,e)=>{const b=y("router-link"),X=y("v-data-table");return G(),M(k,{class:"this-page h-screen overflow-y-auto"},{default:o(()=>[a(b,{to:{name:"Home",params:{date:i(s).params.date}}},{default:o(()=>[a(ee,{color:"#33691E"},{default:o(()=>[p("mdi-arrow-left")]),_:1})]),_:1},8,["to"]),n("p",se,[n("b",null,c(i(z)),1),p(" Съеденные продукты ")]),a(X,{headers:i(T),items:i(v),class:P(["foods-table","mt-8",V.value?"":"block-none"])},{"item.name":o(({item:t})=>[n("p",{class:"name-food",onClick:$=>H(t.raw.id)},c(t.columns.name),9,ne)]),top:o(()=>[a(x,{modelValue:S.value,"onUpdate:modelValue":e[2]||(e[2]=t=>S.value=t),"max-width":"500px"},{default:o(()=>[a(le,{titlePanel:i(K),action:i(J),onOpenPalenAddEdit:e[0]||(e[0]=t=>{S.value=t}),onRewriteListFood:e[1]||(e[1]=t=>F())},null,8,["titlePanel","action"])]),_:1},8,["modelValue"]),a(x,{modelValue:u.value,"onUpdate:modelValue":e[5]||(e[5]=t=>u.value=t),"max-width":"500px"},{default:o(()=>[a(A,null,{default:o(()=>[a(k,null,{default:o(()=>[ie,n("div",de,[a(f,{onClick:e[3]||(e[3]=t=>W()),class:"btn-delete"},{default:o(()=>[p("Удалить")]),_:1}),a(f,{variant:"text",class:"ml-2",onClick:e[4]||(e[4]=t=>u.value=!1)},{default:o(()=>[p(" Отмена ")]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),"item.actions":o(({item:t})=>[a(f,{variant:"text",onClick:$=>O(t.raw),"prepend-icon":"mdi-pencil-outline",size:"40px",color:"#33691E",stacked:""},null,8,["onClick"]),a(f,{variant:"text",onClick:$=>Q(t.raw),"prepend-icon":"mdi-delete-outline",size:"40px",color:"red",stacked:""},null,8,["onClick"])]),_:1},8,["headers","items","class"]),a(x,{modelValue:_.value,"onUpdate:modelValue":e[6]||(e[6]=t=>_.value=t),"max-width":"300px"},{default:o(()=>[a(A,null,{default:o(()=>[a(k,null,{default:o(()=>[n("p",null,"Калории - "+c(r.value.calories)+" Ккал",1),n("p",null,"Белки - "+c(r.value.proteins)+" г",1),n("p",null,"Жиры - "+c(r.value.fats)+" г",1),n("p",null,"Углеводы - "+c(r.value.carbs)+" г",1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(k,{class:P(["mt-16","text-center",V.value?"block-none":""])},{default:o(()=>[ce,a(f,{variant:"tonal",class:"btn-add-food mt-4",onClick:e[7]||(e[7]=t=>l.$router.push(`/FoodSelection/${i(s).params.date}/${i(s).params.section}`))},{default:o(()=>[p(" Добавить ")]),_:1})]),_:1},8,["class"])]),_:1})}}},_e=Y(re,[["__scopeId","data-v-cc05b351"]]);export{_e as default};
