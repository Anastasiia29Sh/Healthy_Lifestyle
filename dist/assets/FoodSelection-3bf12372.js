import{_ as R,W as M,X as U,x as u,L as $,M as T,c as e,N as t,P as g,U as P,Q as m,S as B,Y as G,Z as H,J,K as D,$ as K,R as E,a0 as S,a1 as I}from"./index-b646c7ae.js";import{u as O}from"./actionsFood-80d9aeb1.js";import{V as y,a as Q}from"./VRow-b5c8e2a6.js";import{V as C,a as l}from"./VRadioGroup-157f17bf.js";import{A as W}from"./AddEditFoodSectionPanel-d2aa1d02.js";import{V as X}from"./VContainer-93faf15e.js";import{V as Y}from"./VDialog-57e1799c.js";const F=k=>(G("data-v-2ec7724c"),k=k(),H(),k),Z=F(()=>m("p",{class:"title-filter mb-4"},"Выберите фильтры",-1)),j=F(()=>m("hr",{class:"mb-6"},null,-1)),q=F(()=>m("p",null,"Калории за порцию*",-1)),ee=F(()=>m("p",null,"Белки",-1)),ae=F(()=>m("p",null,"Жиры",-1)),le=F(()=>m("p",null,"Углеводы",-1)),te={class:"mess mt-2"},oe={__name:"FilterFood2",emits:["foodFilter"],setup(k,{emit:n}){const h=M(),{foods:f}=U(h),{getAllFoods:w}=h;w();const V=u(""),b=u(""),i=u(""),v=u(""),p=u(""),r=u({calories:[{min:0,max:99},{min:100,max:249},{min:250,max:499},{min:500,max:d("calories")}],proteins:[{min:0,max:14},{min:15,max:29},{min:30,max:49},{min:50,max:d("proteins")},{min:0,max:d("proteins")}],fats:[{min:0,max:24},{min:25,max:49},{min:50,max:74},{min:75,max:d("fats")},{min:0,max:d("fats")}],carbs:[{min:0,max:24},{min:25,max:49},{min:50,max:74},{min:75,max:d("carbs")},{min:0,max:d("carbs")}]});function A(){if(b.value!==""){i.value===""&&(i.value=4),v.value===""&&(v.value=4),p.value===""&&(p.value=4);let _=f.value.filter(a=>a.calories.between(r.value.calories[b.value].min,r.value.calories[b.value].max)&&a.proteins.between(r.value.proteins[i.value].min,r.value.proteins[i.value].max)&&a.fats.between(r.value.fats[v.value].min,r.value.fats[v.value].max)&&a.carbs.between(r.value.carbs[p.value].min,r.value.carbs[p.value].max));V.value="",n("foodFilter",_)}else V.value="Выберите необходимый диапазон калорий"}Number.prototype.between=function(_,a){return this>=_&&this<=a};function d(_){return f.value.map(a=>a[_]).reduce((a,o)=>a>o?a:o)}return(_,a)=>($(),T("div",null,[Z,j,e(Q,{dense:""},{default:t(()=>[e(y,{cols:"12"},{default:t(()=>[q,e(C,{modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=o=>b.value=o),color:"light-green-darken-4",inline:""},{default:t(()=>[e(l,{label:"Менее 100",value:"0"}),e(l,{label:"100 - 250",value:"1"}),e(l,{label:"250 - 500",value:"2"}),e(l,{label:"Более 500",value:"3"})]),_:1},8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[ee,e(C,{modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=o=>i.value=o),color:"light-green-darken-4",inline:""},{default:t(()=>[e(l,{label:"Менее 15",value:"0"}),e(l,{label:"15 - 30",value:"1"}),e(l,{label:"30 - 50",value:"2"}),e(l,{label:"Более 50",value:"3"}),e(l,{label:"Все",value:"4"})]),_:1},8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[ae,e(C,{modelValue:v.value,"onUpdate:modelValue":a[2]||(a[2]=o=>v.value=o),color:"light-green-darken-4",inline:""},{default:t(()=>[e(l,{label:"Менее 25",value:"0"}),e(l,{label:"25 - 50",value:"1"}),e(l,{label:"50 - 75",value:"2"}),e(l,{label:"Более 75",value:"3"}),e(l,{label:"Все",value:"4"})]),_:1},8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[le,e(C,{modelValue:p.value,"onUpdate:modelValue":a[3]||(a[3]=o=>p.value=o),color:"light-green-darken-4",inline:""},{default:t(()=>[e(l,{label:"Менее 25",value:"0"}),e(l,{label:"25 - 50",value:"1"}),e(l,{label:"50 - 75",value:"2"}),e(l,{label:"Более 75",value:"3"}),e(l,{label:"Все",value:"4"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(P,{variant:"tonal",onClick:a[4]||(a[4]=o=>A()),class:"btn-ok"},{default:t(()=>[g("ОК")]),_:1}),m("p",te,B(V.value),1)]))}},se=R(oe,[["__scopeId","data-v-2ec7724c"]]);const ne={class:"ps-6"},ie={__name:"FoodSelection",setup(k){const n=J(),h=O(),f=u([]),w=u("");let V=(n.params.section==="breakfast"?"Завтрак":n.params.section==="lunch"?"Обед":n.params.section==="dinner"?"Ужин":"")+", "+n.params.date,b=[{align:"start",key:"name",sortable:!1,title:"Продукты/Блюда"},{key:"calories",title:"Калории (Ккал)"},{key:"proteins",title:"Белки (г)"},{key:"fats",title:"Жиры (г)"},{key:"carbs",title:"Углеводы (г)"},{key:"actions",title:""}];const i=u(!1);let v="add";const p=u(V+" Добавить "),{infaAddedFoodSectionDate:r,addedFoodSectionDate:A}=U(h);function d(x){r.value={id:x.id,name:x.name,section:n.params.section,date:n.params.date},i.value=!0}function _(x){return A.value.some(s=>s.id===x&&s.section===n.params.section&&s.date===n.params.date)}const a=u(!0);function o(){f.value.length===0?a.value=!0:a.value=!a.value}function N(x){f.value=x,f.value.length===0?(a.value=!0,w.value="По Вашему запросу данных не найдено"):(a.value=!1,w.value="")}return(x,s)=>{const z=D("router-link"),L=D("v-data-table");return $(),K(X,{class:"this-page h-screen overflow-y-auto"},{default:t(()=>[e(z,{to:{name:"Home",params:{date:S(n).params.date}}},{default:t(()=>[e(E,{color:"#33691E"},{default:t(()=>[g("mdi-arrow-left")]),_:1})]),_:1},8,["to"]),m("p",ne,[g(" Добавить продукты в "),m("b",null,B(S(V)),1)]),e(P,{variant:"text",color:"#1e3e11",onClick:s[0]||(s[0]=c=>o()),class:"mt-2 float-right"},{default:t(()=>[e(E,{color:"#33691E"},{default:t(()=>[g("mdi-filter")]),_:1}),g(" Фильтрация ")]),_:1}),e(se,{onFoodFilter:s[1]||(s[1]=c=>N(c)),class:I(["filter","mt-12",a.value?"block-show":""])},null,8,["class"]),e(L,{headers:S(b),items:f.value,class:I(["foods-table","mt-16",a.value?"":"block-show"]),"sort-by":[{key:"calories",order:"asc"}]},{top:t(()=>[e(Y,{modelValue:i.value,"onUpdate:modelValue":s[3]||(s[3]=c=>i.value=c),"max-width":"500px"},{default:t(()=>[e(W,{titlePanel:p.value,action:S(v),onOpenPalenAddEdit:s[2]||(s[2]=c=>{i.value=c})},null,8,["titlePanel","action"])]),_:1},8,["modelValue"])]),"item.actions":t(({item:c})=>[e(P,{variant:"text",onClick:ue=>d(c.raw),disabled:_(c.raw.id),"prepend-icon":"mdi-plus-circle-outline",size:"40px",color:"#33691E",stacked:""},null,8,["onClick","disabled"])]),_:1},8,["headers","items","class"])]),_:1})}}},fe=R(ie,[["__scopeId","data-v-19d42c94"]]);export{fe as default};
